(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},25:function(e,t,n){e.exports=n(42)},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),l=n.n(c),i=(n(30),n(10)),o=n(13),u=n(2),s=n(4),m=n(3),d=n(5),h="".concat("/item_indexer/spa","/../api/"),p=function(e){return h+e+".json"},f=(n(31),function(e){return""+parseInt(e)===e}),b=function(){return r.a.createElement("div",{className:"preview-instructions"},"Loading...")},v=function(){return r.a.createElement("div",{className:"preview-instructions"},"Enter a bridge catalog db product id to preview how it is indexed.")},E=function(e){return r.a.createElement("pre",{className:"align-left preview"},JSON.stringify(e.content,null," "))},g=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){var t=e.target.value;n.setState({productId:t,canSubmit:f(t)})},n.preview=function(e){n.setState({isLoading:!0}),fetch(p("products/".concat(n.state.productId,"?stream=false"))).then(function(e){return e.json()}).then(function(e){return n.setState({preview:e})}).catch(function(e){return alert("Unable to preview: ".concat(e))}).finally(function(){n.setState({isLoading:!1})}),e.preventDefault()},n.body=function(){var e=n.state,t=e.isLoading,a=e.preview;return t?r.a.createElement(b,null):a?r.a.createElement(E,{content:a}):r.a.createElement(v,null)},n.render=function(){var e=n.state,t=e.productId,a=e.canSubmit;return r.a.createElement("form",{onSubmit:n.preview},r.a.createElement("input",{value:t,onChange:n.onChange,autoFocus:!0,placeholder:"product id",className:"preview-text-input"}),r.a.createElement("span",null,a),r.a.createElement("button",{className:"preview-button",disabled:!a},"Preview"),n.body())},n.state={productId:"",canSubmit:!1,preview:"",isLoading:!1},n}return Object(d.a)(t,e),t}(a.Component);var w=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome to Item Indexer"),r.a.createElement(g,null))},j=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Product Preview"),r.a.createElement(g,null))},_=n(12),O=n(7),k=n(24),N=function(e){return e&&"".concat(e,"px")},y=function(e){var t=function(e){var t=0;return e.map(function(e){var n=t;return t+=e,n})}(e.columnWidths);return r.a.createElement("div",{className:"Header",style:{height:N(e.rowHeight),position:"relative",width:N(e.width),border:"0 none"}},e.columnNames.map(function(n,a){return r.a.createElement("div",{key:n,style:{position:"absolute",left:N(t[a]),top:"0px",height:N(e.rowHeight),width:N(e.columnWidths[a])}},n)}))},I=function(e){var t=e.count,n=e.singular,a=e.plural;return r.a.createElement("span",null,function(){var e=n;return 1!==t&&(e=a||n+function(e){return 1===e?"":"s"}()),e}())},S=function(e){var t=e.count,n=e.itemName,a=e.pluralItemName,c=e.isSelected,l=e.onDeselect;return r.a.createElement("div",null,t,"none"!==t&&r.a.createElement("span",null," ",r.a.createElement(I,{count:t,singular:n,plural:a}),c&&r.a.createElement(function(e){var t=e.onDeselect;return r.a.createElement("span",null," selected ",r.a.createElement("span",{className:"clickable link",onClick:t},"clear"))},{onDeselect:l})))},x=(n(32),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).extractData=function(e){return(n.props.setData||function(e){return e})(e)},n.onDeselect=function(){n.setState(function(e){return{data:e.unfilteredData,unfilteredData:null,selected:null}})},n.state={data:null,unfilteredData:null,selected:null},n.gridRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.url).then(function(e){return e.json()}).then(function(t){return e.extractData(t)}).then(function(t){return e.setState({data:t})})}},{key:"onClick",value:function(e){var t=this,n=e.target,a=this.props,r=a.onSelectItem,c=a.onClickItem,l=function(){var e=n.getAttribute("data-id");return t.state.data&&t.state.data[e]};if(c&&c(l()),r){var i=l();this.state.selected?this.onDeselect():i&&(this.state.selected||(this.gridRef.current.scrollToItem({align:"start",rowIndex:0}),this.setState(function(e){return{data:[i],unfilteredData:e.unfilteredData||e.data,selected:i}}))),r(i)}}},{key:"count",value:function(){var e="none";return this.state.data&&this.state.data.length&&(e=this.state.data.length),e}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,c=t.height,l=t.rowHeight,i=t.columnNames,o=t.columnWidths,u=t.itemName,s=t.pluralItemName,m=t.itemRenderer,d=Object(a.forwardRef)(function(t,n){return r.a.createElement("div",Object.assign({ref:n,onClick:e.onClick.bind(e)},t))});return r.a.createElement("div",null,this.state.data&&this.state.data.length>0&&r.a.createElement("div",null,r.a.createElement(y,{columnWidths:o,width:n,rowHeight:l,columnNames:i}),r.a.createElement(k.a,{itemData:this.state.data,className:"List",columnCount:o.length,columnWidth:function(e){return o[e]},outerElementType:d,height:this.state.selected?l:c,rowCount:this.state.data.length,rowHeight:function(){return l},width:n,ref:this.gridRef},m)),r.a.createElement(S,{count:this.count(),itemName:u,pluralItemName:s,isSelected:!!this.state.selected,onDeselect:this.onDeselect}))}}]),t}(a.Component)),D=function(e){var t=e.columnIndex,n=e.data,a=e.rowIndex,c=e.style,l=e.columns,i=e.formatters,o=e.classNames,u=n[a][l[t]],s=i[t],m=s?s(u,a):u,d="".concat(o[t]," ").concat(a%2===0?"even":"odd");return r.a.createElement("div",{className:d,"data-id":a,style:c,title:m},m)},C=(n(14),function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return D(Object(_.a)({columns:["id","transform_batch_id","status","status_reason","start_datetime","stop_datetime"],formatters:[function(e,t){return t+1},null,null,null,function(e){return e&&new Date(e).toLocaleString()},function(e){return e&&new Date(e).toLocaleString()}],classNames:["clickable","clickable link","clickable long","clickable","clickable"]},this.props))}}]),t}(a.PureComponent)),R=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return D(Object(_.a)({columns:["transform_batch_error_id","transform_batch_id","source_item_type","source_item_id","message"],formatters:new Array(5),classNames:[null,null,null,null,"long"]},this.props))}}]),t}(a.PureComponent),W=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onSelectItem=function(e){var t=e&&e.transform_batch_id,a=n.state.selected===t;n.setState({selected:null}),a||setTimeout(function(){return n.setState({selected:t})},200)},n.state={selected:null},n}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Inbound Transform Batches"),r.a.createElement(x,{width:1350,height:400,rowHeight:35,columnWidths:[50,100,75,500,300,300],columnNames:["#","id","status","reason","start","stop"],itemName:"transform batch",pluralItemName:"transform batches",itemRenderer:C,url:p("transform_batches"),onSelectItem:this.onSelectItem}),this.state.selected&&r.a.createElement("div",{className:"errors-grid"},"Errors",r.a.createElement(x,{width:1350,height:400,rowHeight:35,columnWidths:[100,100,300,150,650],columnNames:["id","batch id","source item type","source item id","message"],itemName:"error",itemRenderer:R,url:p("transform_batches/".concat(this.state.selected)),setData:function(e){return e.batch_errors}})))}}]),t}(a.Component),L=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return D(Object(_.a)({columns:["id","inbound_batch_id","source","data_type","status","status_reason","file_name","start_datetime","stop_datetime","transform_batch_id"],formatters:[function(e,t){return t+1},null,null,null,null,null,null,function(e){return e&&new Date(e).toLocaleString()},function(e){return e&&new Date(e).toLocaleString()},null],classNames:[null,null,null,null,null,"long","medium",null,null,null,null]},this.props))}}]),t}(a.PureComponent),P=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Inbound Batches"),r.a.createElement(x,{width:1600,height:400,rowHeight:35,columnWidths:[50,75,100,100,75,375,300,200,200,100],columnNames:["#","id","source","data type","status","reason","file_name","start","stop","transform batch id"],itemName:"inbound batch",pluralItemName:"inbound batches",itemRenderer:L,url:p("inbound_batches"),onSelectItem:this.onSelectItem}))}}]),t}(a.Component),H=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return D(Object(_.a)({columns:["id","index_batch_id","status","error_count","status_reason","start_datetime","stop_datetime","elapsed"],formatters:[function(e,t){return t+1},null,null,function(e){return e||"?"},null,function(e){return e&&new Date(e).toLocaleString()},function(e){return e&&new Date(e).toLocaleString()},null],classNames:["clickable","clickable","clickable","clickable link","clickable long","clickable","clickable","clickable"]},this.props))}}]),t}(a.PureComponent),T=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return D(Object(_.a)({columns:["index_batch_error_id","index_batch_id","indexed_item_type","indexed_item_id","message"],formatters:new Array(5),classNames:[null,null,null,"link","long"]},this.props))}}]),t}(a.PureComponent),A=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).onSelectItem=function(e){var t=e&&e.index_batch_id,a=n.state.selected===t;n.setState({selected:null}),a||setTimeout(function(){return n.setState({selected:t})},200)},n.onClickErrorItem=function(e){var t=e.indexed_item_type,n=e.indexed_item_id;if("CatModels::Product"===t&&n){var a="/item_indexer/products/".concat(n);window.open(a,"_blank")}else alert("Sorry, not sure how to preview ".concat(t," with id ").concat(n))},n.state={selected:null},n}return Object(d.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Indexing Batches"),r.a.createElement(x,{width:1350,height:400,rowHeight:35,columnWidths:[50,100,100,50,450,225,225,150],columnNames:["#","id","status","errors","reason","start","stop","duration"],itemName:"indexing batch",pluralItemName:"indexing batches",itemRenderer:H,url:p("index_batches"),onSelectItem:this.onSelectItem}),this.state.selected&&r.a.createElement("div",{className:"errors-grid"},"Errors",r.a.createElement(x,{width:1350,height:400,rowHeight:35,columnWidths:[100,100,200,150,800],columnNames:["id","batch id","source item type","source item id","message"],itemName:"error",itemRenderer:T,url:p("index_batches/".concat(this.state.selected)),setData:function(e){return e.batch_errors},onClickItem:this.onClickErrorItem})))}}]),t}(a.Component);function B(e){var t=e.match;return r.a.createElement("div",null,r.a.createElement("h3",null,t.params.topicId))}var J=function(e){var t=e.match;return r.a.createElement("div",null,r.a.createElement("h2",null,"Topics"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"".concat(t.url,"/rendering")},"Rendering with React")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"".concat(t.url,"/components")},"Components")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"".concat(t.url,"/props-v-state")},"Props v. State"))),r.a.createElement(o.a,{path:"".concat(t.path,"/:topicId"),component:B}),r.a.createElement(o.a,{exact:!0,path:t.path,render:function(){return r.a.createElement("h3",null,"Please select a topic.")}}))};n(41);var M=function(){return r.a.createElement(i.a,{basename:"".concat("/item_indexer/spa","/")},r.a.createElement("div",{className:"App"},r.a.createElement("ul",{className:"App-navigation"},r.a.createElement("li",null,r.a.createElement(i.b,{to:"/preview"},"Preview")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/inbound"},"Inbound")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/transform"},"Transform")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/indexing"},"Indexing"))),r.a.createElement("hr",null),r.a.createElement(o.a,{exact:!0,path:"/",component:w}),r.a.createElement(o.a,{path:"/preview",component:j}),r.a.createElement(o.a,{path:"/inbound",component:P}),r.a.createElement(o.a,{path:"/transform",component:W}),r.a.createElement(o.a,{path:"/indexing",component:A}),r.a.createElement(o.a,{path:"/topics",component:J})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.7dbec55f.chunk.js.map